<app-breadcrumb [items]="breadcrumbs"></app-breadcrumb>
<app-alert></app-alert>
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="text-primary">Disciplinas</h2>
    </div>

    <form (ngSubmit)="onAddDiscipline()" class="mb-4">
        <div class="input-group">
            <input type="text" class="form-control" placeholder="Novo nome da disciplina" name="newDiscipline"
                [(ngModel)]="newDisciplineName" required />
            <button type="submit" class="btn btn-primary">Adicionar</button>
        </div>
    </form>

    <div class="row row-cols-1 row-cols-md-2 g-4" *ngIf="disciplines$ | async as disciplines; else loading">
        <div class="col" *ngFor="let d of disciplines">
            <div class="card h-100 shadow-sm">
                <div class="card-body d-flex flex-column justify-content-between">
                    <div>
                        <h5 class="card-title">{{ d.Name }}</h5>
                        <p class="card-text text-muted">Total de subtópicos: {{ d.Subtopics.length }}</p>
                    </div>
                    <div class="mt-3 d-flex justify-content-between">
                        <a [routerLink]="['/subtopics', d.Id]" class="btn btn-sm btn-outline-primary">Ver Subtópicos</a>
                        <button (click)="onDeleteDiscipline(d.Id)"
                            class="btn btn-sm btn-outline-danger">Remover</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <ng-template #loading>
        <div class="text-center">
            <!-- <p>Carregando disciplinas...</p> -->
            <app-loading-anim [path]="'assets/animations/loading_books.json'"></app-loading-anim>
        </div>
    </ng-template>
</div>